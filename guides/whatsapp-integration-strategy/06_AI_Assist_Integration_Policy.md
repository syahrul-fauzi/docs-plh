Berikut **dokumen selanjutnya secara mendalam dan terstruktur** untuk integrasi WhatsApp di *Lawyers-Hub*:

---

````markdown
# ğŸ“˜ 06_AI_Assist_Integration_Policy.md  
## AI Assist Integration Policy â€” WhatsApp Integration  
*Version: 1.0 | Last Updated: 2026-01-06*

---

## ğŸ¯ Tujuan Dokumen

Dokumen ini menjelaskan **kebijakan penggunaan layanan AI (Assistant)** dalam pipeline WhatsApp-to-Lawyers-Hub untuk:

âœ” Klasifikasi intent pesan  
âœ” Urgensi & estimate (Pre-Case)  
âœ” Saran time billing  
âœ” Analytics support

Kebijakan ini bukan stub implementasi â€” *ini batas etik, keamanan, dan compliance* yang harus dipatuhi tim engineer & product saat memanfaatkan AI.

---

## ğŸ“Œ Prinsip Utama (Non-Negotiable)

ğŸ”’ **AI hanya boleh bertindak sebagai *assist* â€” bukan *decision maker*.**  
Artinya:

1. **AI tidak boleh memberikan nasihat hukum.**  
2. **AI tidak boleh mengirim jawaban langsung ke pengguna.**  
3. **AI tidak boleh menetapkan billing otomatis.**  
4. **AI tidak boleh melakukan perubahan state tanpa persetujuan manusia.**

Semua keputusan akhir **harus melalui pemeriksaan manusia (lawyer)**.

---

## ğŸ§  1ï¸âƒ£ Domain Penggunaan AI (Diperbolehkan)

### A) Intake Classification
AI boleh mengkategorikan:
- Topik hukum (family, employment, corporate, dsb) sesuai klasifikasi hukum Indonesia.
- Urgensi (high/medium/low) berdasarkan kata kunci (misal: "somasi", "sidang besok", "polisi").
- Indicator *possibly sensitive cases*.

**AI Guardrails & Trigger Words:**
- **Safety Filter:** Jika input mengandung kata kunci "bunuh diri", "kekerasan seksual", atau "bahaya segera", AI wajib menaikkan urgensi ke `CRITICAL` dan memicu alert langsung ke admin manusia.
- **No Storage Policy:** Sistem tidak boleh menyimpan prompt atau response AI yang mengandung PII asli (raw) dalam log permanen.

**AI output tidak boleh**:
- Mengutip pasal-pasal hukum secara spesifik atau memberikan interpretasi hukum (KUHP, KUHPer, dll).
- Memberi rekomendasi tindakan hukum.
- Menjawab â€œapa yang harus saya lakukanâ€.

### B) Structured Summary
AI boleh memberi *summary* dari pesan panjang untuk:
- bantu lawyer membaca cepat
- buat ringkasan bagi intake session

### C) Billable Time Suggestion
AI boleh membuat **saran durasi** untuk pesan tertentu  
(tidak diketok otomatis; lawyer harus approve).

---

## âš–ï¸ 1.7 Bias Monitoring & Fairness
Mengingat sensitivitas dalam layanan hukum:
- **Bias Detection:** Tim engineering harus secara periodik meninjau output AI untuk memastikan tidak ada bias terhadap gender, suku, atau status sosial ekonomi dalam penentuan urgensi atau klasifikasi perkara.
- **Feedback Loop:** UI Lawyer Dashboard wajib menyediakan tombol "Koreksi AI" (misal: koreksi topik dari 'Family' ke 'Corporate'). Data koreksi ini disimpan sebagai bahan evaluasi performa model (ground truth).

---

## ğŸ›¡ï¸ 1.5 PII Masking & Context Minimization
Sebelum data dikirim ke model AI eksternal (misal: OpenAI/Claude), sistem **WAJIB** melakukan:
1. **Masking:** Mengganti Nama, Nomor Telepon, Alamat, dan Email dengan placeholder (misal: `[PERSON_NAME]`, `[PHONE_NUMBER]`).
2. **Context Minimization:** Hanya mengirimkan **maksimal 5 pesan terakhir** untuk konteks klasifikasi, bukan seluruh riwayat percakapan, guna meminimalkan eksposur data.
3. **Hashing:** Jika identitas diperlukan untuk konteks, gunakan hash yang konsisten namun anonim.
4. **No-Storage Policy:** Memastikan provider AI tidak menggunakan data untuk training model mereka (Enterprise API mode).

---

## ğŸ§± 2ï¸âƒ£ Output Format Policy

Setiap response AI harus mematuhi format berikut:

```jsonc
{
  "classification": {
    "legal_domain": "string",
    "confidence": number
  },
  "summary_text": "string",
  "urgency_level": "low | medium | high",
  "estimated_effort_minutes": number,
  "metadata": {
    "model_version": "string",
    "timestamp": "ISO8601"
  },
  "disclaimer": "string"
}
````

ğŸ“Œ **Harus selalu ada disclaimer eksplisit**:

> *This result is generated by AI for classification/summary only.
> It does not constitute legal advice and should be reviewed by a qualified lawyer.*

---

## ğŸ›¡ 3ï¸âƒ£ Model & Prompt Versioning
- **Prompt as Code:** Semua prompt yang digunakan untuk klasifikasi dan ringkasan harus dikelola dalam repository (Git) dan memiliki versi (misal: `v1.0.2-intake-id`).
- **Traceability:** Setiap hasil AI dalam database harus mencatat `prompt_version` bersama dengan `model_version`.

---

## ğŸ’° 4ï¸âƒ£ Cost & Token Monitoring
- **Tenant Quota:** Sistem harus melacak penggunaan token AI per-tenant untuk keperluan penagihan internal atau pembatasan kuota (Rate Limiting AI).
- **Alerting:** Berikan peringatan jika penggunaan token oleh satu tenant melonjak drastis (indikasi bot attack atau loop).

---

## ğŸ” 4ï¸âƒ£ Privacy & Data Policy

AI hanya boleh menerima:

* hashed phone / hashed identifiers
* normalized message content
  Tidak boleh menerima:
* raw phone numbers
* personally identifiable information
* sensitive document content

ğŸ‘‰ Ini sejalan dengan best practices webhook security & data minimization ğŸ›¡ï¸ ([Web Spaced Design][1])

---

## ğŸ“Š 5ï¸âƒ£ Confidence & Uncertainty Handling

Jika **confidence < threshold**:

```
if (confidence < 0.7) {
  mark AI output as â€œlow confidenceâ€
  escalate to human review
}
```

UI harus menampilkan status *confidence* guna transparansi.

---

## ğŸ§ª 6ï¸âƒ£ Human-in-the-Loop Enforcement

AI output **tidak boleh** langsung mengubah:

âŒ Case status
âŒ Billing entry
âŒ Message routing

Semua perubahan:
âœ” lawyer review
âœ” manual save

---

## ğŸ§© 7ï¸âƒ£ Event Logging & Audit Trail

Setiap AI interaction harus dicatat:

| Field          | Contoh                  |
| -------------- | ----------------------- |
| model_version  | "gpt-4.1-legal-assist1" |
| timestamp      | 2026-01-05T09:21:45Z    |
| session_id     | UUID                    |
| message_id     | UUID                    |
| classification | {...}                   |
| disclaimer     | string                  |

Logs harus ter-immutable. Lihat observability spec untuk ringkasan logging style ğŸ§  ([ChatArchitect][2])

---

## ğŸ“š 8ï¸âƒ£ Error & Retry Policy

AI errors must be:

* logged
* notified to operator UI
* not blocking domain processing

Retryable errors:

* timeouts
* transient infra faults

Non-retryable errors:

* schema mismatch
* model reject

---

## ğŸ“œ 9ï¸âƒ£ Compliance & Regulatory Guardrails

AI usage policy harus selaras dengan:

* UU PDP & data minimization
* Legal Ethics Code (advokat tidak digantikan AI)
* Auditability standard

ğŸ“Œ AI hanya *assist*, bukan advisor â€” ini wajib.

---

## ğŸ“Œ 10ï¸âƒ£ Summary Rules

| Area                     | Allowed        | Not Allowed    |
| ------------------------ | -------------- | -------------- |
| Legal classification     | âœ”              | âŒ              |
| Legal advice             | âŒ              | âŒ              |
| Time suggestion          | âœ”              | âŒ auto apply   |
| Routing                  | ğŸŸ¡ (recommend) | âŒ auto routing |
| Billing                  | ğŸŸ¡ (recommend) | âŒ auto billing |
| Outbound message from AI | âŒ              | âŒ              |

---

## ğŸ“ Referensi Best Practices

**Signature & webhook verification:**
WhatsApp sends HMAC-SHA256 signature header (`X-Hub-Signature-256`) that must be verified before processing inbound events. ([DeepWiki][3])

**Webhook asynchronous & queue:**
Integrate webhook events to a queue instead of direct processing to prevent retries & duplicates. ([SMS Gateway Center][4])

**Security & HTTPS:**
Always use HTTPS with valid certs for webhook & API calls. ([Web Spaced Design][1])

```

---

Silakan tinjau.  
Jika sudah sesuai, saya siap lanjut ke **07_Intake_PreCase_Workflow.md** â€” cukup jawab **lanjut**.
::contentReference[oaicite:5]{index=5}
```

[1]: https://webspaceddesign.com/securing-user-data-on-whatsapp-business-api-2025-best-practices/?utm_source=chatgpt.com "Securing User Data on WhatsApp Business API: 2025 Best Practices"
[2]: https://www.chatarchitect.com/news/debugging-and-logging-custom-whatsapp-api-integrations?utm_source=chatgpt.com "Debugging and logging custom WhatsApp API integrations"
[3]: https://deepwiki.com/gokapso/whatsapp-cloud-api-js/7.1-webhook-verification?utm_source=chatgpt.com "Webhook Verification | gokapso/whatsapp-cloud-api-js | DeepWiki"
[4]: https://www.smsgatewaycenter.com/blog/whatsapp-business-api-webhooks-real-time-integration-guide/?utm_source=chatgpt.com "WhatsApp Business API Webhooks: Real-time Integration Guide â€“ SMSGatewayCenter Blog"
